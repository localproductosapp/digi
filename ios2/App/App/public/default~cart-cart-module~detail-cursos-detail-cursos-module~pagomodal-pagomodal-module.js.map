{"version":3,"sources":["./src/app/pagomodal/pagomodal.page.scss","./src/app/pagomodal/pagomodal.page.html","./src/app/pagomodal/pagomodal.page.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAe,0EAAW,0BAA0B,GAAG,gBAAgB,gCAAgC,GAAG,kBAAkB,wBAAwB,GAAG,6CAA6C,2cAA2c,E;;;;;;;;;;;;ACA/oB;AAAe,2OAA4K,sDAAsD,kBAAkB,4OAA4O,mFAAmF,YAAY,i3EAAi3E,E;;;;;;;;;;;;;;;;;;;;;;;;ACAt4F;AACzD,8CAA8C;AACG;AACY;AACR;AACJ;AAC2C;IAQ/E,aAAa,SAAb,aAAa;IAwBxB,YAAY,SAAoB,EACtB,MAAc,EACd,OAAmB,EACpB,eAAgC,EAChC,eAAgC,EAC/B,OAAsB;QAJtB,WAAM,GAAN,MAAM,CAAQ;QACd,YAAO,GAAP,OAAO,CAAY;QACpB,oBAAe,GAAf,eAAe,CAAiB;QAChC,oBAAe,GAAf,eAAe,CAAiB;QAC/B,YAAO,GAAP,OAAO,CAAe;QAV9B,aAAQ,GAAC,KAAK;QAEd,oBAAe,GAAC,KAAK;QASrB,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;QACpC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;QAErC,IAAI,CAAC,UAAU,GAAC,UAAU,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,OAAO,GAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC;QAEpC,IAAI,OAAO,GAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC;QAExC,IAAI,CAAC,SAAS,GAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,EAAE;IAEvC,CAAC;IAED,QAAQ;IACR,CAAC;IAED,UAAU;QACR,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAC,IAAI,CAAC,QAAQ,CAAC;IAC/C,CAAC;IAEK,KAAK;;YACT,IAAI,CAAC,eAAe,GAAC,IAAI;YACzB,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,6GAA6G,CAAC,CAAC;YAE/I,IAAI,IAAI,GAAG;gBACV,MAAM,EAAE,IAAI,CAAC,aAAa;gBAC1B,QAAQ,EAAE,IAAI,CAAC,QAAQ;gBACvB,OAAO,EAAE,IAAI,CAAC,OAAO;gBACrB,GAAG,EAAE,IAAI,CAAC,GAAG;aACb;YAED,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,CAAC;iBAC7B,IAAI,CAAC,KAAK,CAAC,EAAE;gBAEb,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAC,KAAK,CAAC,EAAE,CAAC;gBACrC,IAAG,KAAK,CAAC,EAAE,EAAC;oBAGV,IAAI,QAAQ,GAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE;oBACxC,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAC,QAAQ,CAAC;oBACjD,IAAI,MAAM,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;oBAEvC,OAAO,CAAC,GAAG,CAAC,kCAAkC,EAAC,MAAM,CAAC;oBAEtD,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,EAAC,KAAK,EAAC,KAAK,CAAC,EAAE,EAAC,MAAM,EAAC,MAAM,EAAC,CAAC;yBACnC,IAAI,CAAC,GAAG,CAAC,EAAE;wBACV,yBAAyB;wBACzB,OAAO,CAAC,GAAG,CAAC,+BAA+B,EAAC,GAAG,CAAC,CAAC;wBAEjD,IAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,IAAE,WAAW,EAAC;4BACrD,IAAI,CAAC,eAAe,GAAC,KAAK;4BAE1B,IAAI,CAAC,YAAY,CAAC,0BAA0B,EAAC,SAAS,CAAC;4BAIvD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,EAAC,KAAK,EAAE,EAAE;gCAErC,uBAAuB;gCAEvB,IAAI,CAAC,YAAY,CAAC,EAAC,SAAS,EAAC,OAAO,CAAC,SAAS,EAAC,WAAW,EAAC,IAAI,CAAC,SAAS,EAAC,EAAE,EAAC,OAAO,CAAC,EAAE,EAAC,CAAC;4BAO3F,CAAC,CAAC,CAAC;4BAEH,yDAAyD;yBAO1D;6BAAI;4BACH,IAAI,CAAC,YAAY,CAAC,mBAAmB,EAAC,QAAQ,CAAC;4BAC/C,IAAI,CAAC,eAAe,GAAC,KAAK;yBAC3B;wBAED,IAAI,CAAC,OAAO,EAAE;oBAEhB,CAAC,EAAE,GAAG,CAAC,EAAE;wBACT,0BAA0B;wBAC1B,IAAI,CAAC,eAAe,GAAC,KAAK;wBACxB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBACnB,CAAC,CAAC,CAAC;iBAGlB;YAEJ,CAAC,CAGA;iBAEA,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC;QACvC,CAAC;KAAA;IAKK,YAAY,CAAC,OAAO,EAAC,KAAK;;YAC9B,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,OAAO,EAAE,OAAO;gBAChB,QAAQ,EAAE,IAAI;gBACd,KAAK,EAAC,KAAK;aACZ,CAAC,CAAC;YACH,KAAK,CAAC,OAAO,EAAE,CAAC;QAClB,CAAC;KAAA;IAGD,YAAY,CAAC,IAAI;QACf,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,IAAI,CAAC;aACjC,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,yBAAyB;YACzB,OAAO,CAAC,GAAG,CAAC,6BAA6B,EAAC,GAAG,CAAC,CAAC;YAG/C,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,EAAC,EAAE,EAAC,IAAI,CAAC,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;gBACnD,yBAAyB;gBACzB,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAC,GAAG,CAAC,CAAC;YAGzC,CAAC,CAAC,CAAC;QAEL,CAAC,EAAE,GAAG,CAAC,EAAE;YACT,0BAA0B;YACxB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,WAAW;QAET,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,EAAC,KAAK,EAAE,EAAE;YAErC,uBAAuB;YAEvB,4FAA4F;YAG5F,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,EAAC,EAAE,EAAC,OAAO,CAAC,EAAE,EAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;gBACtD,yBAAyB;gBACzB,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAC,GAAG,CAAC,CAAC;YAGzC,CAAC,CAAC,CAAC;QAIL,CAAC,CAAC,CAAC;IAEL,CAAC;IAGD,OAAO;QACL,+CAA+C;QAC/C,qDAAqD;QACrD,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC;YAC3B,WAAW,EAAE,IAAI;SAClB,CAAC,CAAC;IACL,CAAC;IAED,OAAO;QAGL,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,EAAC,WAAW,EAAC,IAAI,CAAC,SAAS,EAAC,CAAC;aACrD,IAAI,CAAC,GAAG,CAAC,EAAE;YACV,yBAAyB;YACzB,OAAO,CAAC,GAAG,CAAC,2BAA2B,EAAC,GAAG,CAAC,CAAC;YAC7C,0DAA0D;YAC1D,0DAA0D;YAC1D,IAAI,CAAC,IAAI,GAAC,GAAG,CAAC;YAEd,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,EAAC,KAAK,EAAE,EAAE;gBAElC,uBAAuB;gBAEvB,IAAI,CAAC,UAAU,IAAE,UAAU,CAAC,OAAO,CAAC,WAAW,CAAC;gBAEhD,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAC,IAAI,CAAC,UAAU,CAAC;YAIlD,CAAC,CAAC,CAAC;QAIL,CAAC,EAAE,GAAG,CAAC,EAAE;YACT,0BAA0B;YACxB,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACnB,CAAC,CAAC,CAAC;IAEL,CAAC;CAIJ;;YA3OQ,wDAAS;YAHT,0EAAM;YACN,gEAAU;YAFV,8DAAe;YAGf,8DAAe;YACa,4DAAa;;;oBAW7C,mDAAK;uBACL,mDAAK;4BACL,mDAAK;;AALG,aAAa;IALzB,+DAAS,CAAC;QACT,QAAQ,EAAE,eAAe;QACzB,iFAAoC;;KAErC,CAAC;GACW,aAAa,CAmOzB;AAnOyB","file":"default~cart-cart-module~detail-cursos-detail-cursos-module~pagomodal-pagomodal-module.js","sourcesContent":["export default \"ion-item {\\n  --border-color: white;\\n}\\n\\n.sinborder {\\n  --border-color: transparent;\\n}\\n\\nion-checkbox {\\n  --background: white;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3BhZ29tb2RhbC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxxQkFBQTtBQUNKOztBQUVBO0VBQ0ksMkJBQUE7QUFDSjs7QUFFQTtFQUNJLG1CQUFBO0FBQ0oiLCJmaWxlIjoicGFnb21vZGFsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1pdGVte1xuICAgIC0tYm9yZGVyLWNvbG9yOiB3aGl0ZTtcbn1cblxuLnNpbmJvcmRlcntcbiAgICAtLWJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7IFxufVxuXG5pb24tY2hlY2tib3h7XG4gICAgLS1iYWNrZ3JvdW5kOiB3aGl0ZTtcbn0iXX0= */\";","export default \"<ion-header #header class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <!-- <ion-buttons slot=\\\"start\\\">\\n      \\n    </ion-buttons> -->\\n    <ion-button (click)=\\\" dismiss();borrarCarro()\\\" style=\\\"    --background: transparent;margin-top: -62px;\\\"><ion-icon name=\\\"arrow-back-outline\\\"></ion-icon></ion-button>\\n    <img class=\\\"logo\\\" src=\\\"/assets/img/logo.png\\\">\\n\\n\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\" scrollEvents=\\\"true\\\" style=\\\"top: 76px;\\\">\\n  <ion-grid>\\n    <ion-row>\\n      <ion-col>\\n\\n        <h3>Cantidad total: {{montoTotal}} €</h3>\\n\\n          <div>\\n            <ion-list lines=\\\"full\\\" class=\\\"ion-no-margin ion-no-padding\\\">\\n              <ion-item>\\n                <ion-label position=\\\"stacked\\\">Nombre <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n                <ion-input required type=\\\"text\\\" ></ion-input>\\n              </ion-item>\\n\\n              <ion-item>\\n                <ion-label position=\\\"stacked\\\">Número de tarjeta <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\n                <ion-input required type=\\\"tel\\\" [(ngModel)]=\\\"numeroTarjeta\\\" maxlength=\\\"16\\\" ></ion-input>\\n              </ion-item>\\n       \\n\\n              <ion-item>\\n                <ion-label position=\\\"stacked\\\">Mes</ion-label>\\n                <ion-input required [(ngModel)]=\\\"expMonth\\\" maxlength=\\\"2\\\"   placeholder=\\\"xx\\\" type=\\\"tel\\\"></ion-input>\\n              </ion-item>\\n              <ion-item>\\n                <ion-label position=\\\"stacked\\\">Año</ion-label>\\n                <ion-input required [(ngModel)]=\\\"expYear\\\" placeholder=\\\"xxxx\\\" maxlength=\\\"4\\\"  type=\\\"tel\\\"></ion-input>\\n              </ion-item>\\n              <ion-item>\\n                <ion-label position=\\\"stacked\\\">CCV</ion-label>\\n                <ion-input [(ngModel)]=\\\"cvc\\\" required type=\\\"number\\\"></ion-input>\\n              </ion-item>\\n            </ion-list>\\n\\n            <ion-list>\\n              <ion-item class=\\\"sinborder\\\">\\n                <ion-label>Acepto los términos y condiciones</ion-label>\\n                <ion-checkbox slot=\\\"end\\\" (click)=\\\"valorCheck()\\\" [(ngModel)]=\\\"terminos\\\"></ion-checkbox>\\n              </ion-item>\\n            </ion-list>\\n\\n            <div class=\\\"ion-padding\\\">\\n              <ion-button expand=\\\"block\\\" [disabled]=\\\"spinnerFeatured || !terminos\\\" (click)=\\\"pagar()\\\" type=\\\"button\\\" class=\\\"ion-no-margin\\\">Tramitar pedido</ion-button>\\n              <!-- <ion-button expand=\\\"block\\\"  (click)=\\\"dismiss()\\\" type=\\\"button\\\" class=\\\"ion-no-margin\\\">Volver</ion-button> -->\\n            </div>\\n\\n            <ion-grid *ngIf=\\\"spinnerFeatured\\\">\\n              <ion-row>\\n                <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n                  <ion-spinner *ngIf=\\\"spinnerFeatured\\\" name=\\\"crescent\\\"></ion-spinner>\\n                </ion-col>\\n              </ion-row>\\n            </ion-grid>\\n          </div>\\n    </ion-col>\\n  </ion-row>\\n</ion-grid>\\n</ion-content>\\n\";","import { Component, Input, OnInit } from '@angular/core';\n// import { NavParams } from '@ionic/angular';\nimport { ModalController } from '@ionic/angular';\nimport { Stripe } from '@awesome-cordova-plugins/stripe/ngx';\nimport { ApiService } from '../services/api.service';\nimport { ToastController } from '@ionic/angular';\nimport { NavParams,LoadingController,NavController, AlertController } from '@ionic/angular';\n\n\n@Component({\n  selector: 'app-pagomodal',\n  templateUrl: './pagomodal.page.html',\n  styleUrls: ['./pagomodal.page.scss'],\n})\nexport class PagomodalPage implements OnInit {\n\n    // Data passed in by componentProps\n    @Input() monto: string;\n    @Input() lastName: string;\n    @Input() middleInitial: string;\n\n\n\n    numeroTarjeta\n    expMonth\n    expYear\n    cvc\n\n    montoTotal\n    cursoss\n    idUsuario\n    cart\n    valorTotal\n    terminos=false\n\n    spinnerFeatured=false\n\n\n  constructor(navParams: NavParams,\n    private stripe: Stripe,\n    private service: ApiService,\n    public modalController: ModalController ,\n    public toastController: ToastController,\n    private navCtrl: NavController) { \n    console.log(navParams.get('monto'));\n    console.log(navParams.get('cursos'));\n\n    this.montoTotal=parseFloat(navParams.get('monto'));\n    this.cursoss=navParams.get('cursos')\n\n    let arreglo=localStorage.getItem('user')\n\n    this.idUsuario=JSON.parse(arreglo).id\n    \n  }\n\n  ngOnInit() {\n  }\n\n  valorCheck(){\n    console.log('este es el valor',this.terminos)\n  }\n\n  async pagar(){\n    this.spinnerFeatured=true\n    this.stripe.setPublishableKey('pk_test_51K7hlpGPfZahrmfPjpVX1KxmRtWqr3UNiqov7pO0sswLMoXRJhsceulNSjacflHABhjT5CfABaZbiCs7TNpDIpvB003866cfYb');\n  \n  let card = {\n   number: this.numeroTarjeta,\n   expMonth: this.expMonth,\n   expYear: this.expYear,\n   cvc: this.cvc\n  }\n  \n  this.stripe.createCardToken(card)\n     .then(token => {\n\n      console.log('este es el toke',token.id)\n        if(token.id){\n\n        \n          let numerito =this.montoTotal.toString()\n          console.log('este es el monto a  pagar',numerito)\n          let result = numerito.replace(\".\", \"\");\n\n          console.log('este es el monto que va a viajar',result)\n\n          this.service.pagar({token:token.id,amount:result})\n                        .then(res => {\n                          // this.cateSpinner=false\n                          console.log('esta es la respuesta del pago',res);\n\n                          if(JSON.parse(JSON.stringify(res)).status=='succeeded'){\n                            this.spinnerFeatured=false\n\n                            this.presentToast('Pago procesado con éxito','success') \n\n                            \n\n                            this.cursoss.forEach((element,index) => {\n\n                              // console.log(element)\n                        \n                              this.AgregarCurso({idCursoFk:element.idCursoFk,idUsuarioFk:this.idUsuario,id:element.id})\n\n\n                        \n                           \n                            \n                              \n                            });\n                          \n                            //  this.navCtrl.navigateForward(['/tabs/cursosPremiun'])\n                       \n\n                           \n\n                            \n\n                          }else{\n                            this.presentToast('Pago no procesado','danger') \n                            this.spinnerFeatured=false\n                          }\n\n                          this.dismiss()\n                       \n                        }, err => {\n                        //  this.cateSpinner=false\n                        this.spinnerFeatured=false\n                          console.log(err);\n                        });\n\n\n        }\n\n     }\n \n\n     )\n\n     .catch(error => console.error(error));\n    }\n\n\n    \n\n    async presentToast(message,color) {\n      const toast = await this.toastController.create({\n        message: message,\n        duration: 3000,\n        color:color\n      });\n      toast.present();\n    }\n\n\n    AgregarCurso(dato){\n      this.service.addCursoPremiun(dato)\n      .then(res => {\n        // this.cateSpinner=false\n        console.log('respuesta del agrego cursos',res);\n    \n\n        this.service.deleteCartUser({id:dato.id}).then(res => {\n          // this.cateSpinner=false\n          console.log('respuesta del borro',res);\n      \n       \n        });\n     \n      }, err => {\n      //  this.cateSpinner=false\n        console.log(err);\n      });\n    }\n\n    borrarCarro(){\n      \n      this.cursoss.forEach((element,index) => {\n\n        // console.log(element)\n  \n        // this.AgregarCurso({idCursoFk:element.idCursoFk,idUsuarioFk:this.idUsuario,id:element.id})\n\n\n        this.service.deleteCartUser({id:element.id}).then(res => {\n          // this.cateSpinner=false\n          console.log('respuesta del borro',res);\n      \n       \n        });\n     \n      \n        \n      });\n   \n    }\n\n\n    dismiss() {\n      // using the injected ModalController this page\n      // can \"dismiss\" itself and optionally pass back data\n      this.modalController.dismiss({\n        'dismissed': true\n      });\n    }\n\n    gteCart(){\n\n  \n      this.service.getCartUser({idUsuarioFk:this.idUsuario})\n      .then(res => {\n        // this.cateSpinner=false\n        console.log('respuesta del get carrito',res);\n        //  this.presentToast('Agregado correctamente al carrito')\n        // this.categories = JSON.parse(JSON.stringify(res)).data;\n        this.cart=res;\n    \n        this.cart.forEach((element,index) => {\n    \n          // console.log(element)\n    \n          this.valorTotal+=parseFloat(element.precioCurso)\n    \n          console.log('este es el precio',this.valorTotal)\n    \n        \n          \n        });\n    \n    \n     \n      }, err => {\n      //  this.cateSpinner=false\n        console.log(err);\n      });\n    \n    }\n\n\n\n}\n"],"sourceRoot":"webpack:///"}